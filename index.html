

<canvas class="canvas" id="canvas" width="800" height="600"></canvas>
<br/>
<input type="checkbox" id="checkbox">
<label>Show Vehicle Attributes</label>
<br/>

<script src="vector.js"></script>
<script src="vehicle.js"></script>

<script>

FOODRATE = 0.025;
POISONRATE = 0.01;
MUTATIONRATE = 0.2;
REPRODUCTIONRATE = 0.0025;
SHOWATTRIBUTES = true;

let v = new Vehicle(200,200);
let t = new Vector(200,200);
vehicles = [];
food = [];
poison = [];

window.onload = function (){
        canvas = document.getElementById("canvas");
        ctx = canvas.getContext("2d");
        document.addEventListener("mousemove",mouseMove);
        checkbox = document.getElementById("checkbox");
        for (var i = 0; i < 10; i++)
        {
            var x = Math.random() * canvas.width;
            var y = Math.random() * canvas.height;
            vehicles[i] = new Vehicle(x,y);
        }
        for (var i = 0; i < 40; i++)
        {
            var x = Math.random() * canvas.width;
            var y = Math.random() * canvas.height;
            food.push(new Vector(x,y));
        }
        for (var i = 0; i < 20; i++)
        {
            var x = Math.random() * canvas.width;
            var y = Math.random() * canvas.height;
            poison.push(new Vector(x,y));
        }

        var loop = setInterval(gameLoop, 1000/80);
    }

    function mouseMove(event)
    {
        t.x = event.clientX;
        t.y = event.clientY;
    }

    function keyPush(event)
    {
        v = new Vehicle(200,200);
    }

    function addFood()
    {
        var x = Math.random() * canvas.width;
        var y = Math.random() * canvas.height;
        food.push(new Vector(x,y));
    }

    function addPoison()
    {
        var x = Math.random() * canvas.width;
        var y = Math.random() * canvas.height;
        poison.push(new Vector(x,y));
    }

    function gameLoop()
    {
        SHOWATTRIBUTES = checkbox.checked;

        draw();

        for (var i = vehicles.length - 1; i >= 0; i--)
        {
            vehicles[i].Boundaries(canvas.width,canvas.height);
            //v.Seek(t);
            //v.Eat(food);
            //v.Eat(poison);
            vehicles[i].Behave(food,poison);
            vehicles[i].Update();

            vehicles[i].Draw(ctx);

            var child = vehicles[i].Reproduce();
            if (child != null)
            {
                vehicles.push(child);
            }

            if (vehicles[i].Dead())
            {
                var x = vehicles[i].position.x;
                var y = vehicles[i].position.y;
                food.push(new Vector(x,y));
                vehicles.splice(i,1);
            }
        }

        if (Math.random() < FOODRATE)
        {
            addFood();
        }
        if (Math.random() < POISONRATE)
        {
            addPoison();
        }
    }

    function draw()
    {
        ctx.fillStyle = "black";
        ctx.fillRect(0,0,canvas.width, canvas.height);

        /*ctx.fillStyle = "grey";
        ctx.beginPath();
        ctx.arc(t.x,t.y,20,0,2*Math.PI,true);
        ctx.fill();*/

        ctx.fillStyle = "lime";
        for (var i = 0; i < food.length; i++)
        {
            ctx.beginPath();
            ctx.arc(food[i].x, food[i].y, 4, 0, 2*Math.PI);
            ctx.fill();
        }

        ctx.fillStyle = "red";
        for (var i = 0; i < poison.length; i++)
        {
            ctx.beginPath();
            ctx.arc(poison[i].x, poison[i].y, 4, 0, 2*Math.PI);
            ctx.fill();
        }
    }


</script>